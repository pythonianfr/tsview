<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="{{ url_for('tsview.static', filename='bootstrap.min.css')}}" rel="stylesheet"/>
        <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
        <link rel="stylesheet" href="{{ url_for('tsview.static', filename='style.css') }}"/>
        <link href="{{ url_for('tsview.static', filename='menu_stand_alone.css')}}" rel="stylesheet"/>
        <script src="{{ url_for('tsview.static', filename='menu_stand_alone_elm.js')}}"></script>
        <script src="{{ url_for('tsview.static', filename='plot_figure.js') }}"></script>
        <script src="https://cdn.plot.ly/plotly-1.50.1.min.js"></script>
        <title>{{title}}</title>
    </head>

    <body>
      <div class="grid-container">
            <div id="menu-elm">
            </div>
            <div class="main-content">
                <div id="app"></div>
            </div>
        </div>
        <script src="./tsview_static/plot_elm.js"></script>
        <script>
         const baseurl = "{{ homeurl }}"
         const haseditor = {{ haseditor }}
         var app = Elm.Plot.init({
             node: document.getElementById("app"),
             flags: {
                 baseurl : baseurl,
                 selected : {{ series | safe }},
                 haseditor: haseditor,
                 min: "{{ min }}",
                 max: "{{ max }}",
                 debug: "{{ debug }}",
             }
         });
          app.ports.saveToLocalStorage.subscribe(function (dataInCache) {
             localStorage.setItem("horizon", JSON.stringify(dataInCache))
         });
         incache = localStorage.getItem("horizon")
         if (incache === null) {
             incache = '{"horizon": null, "inferredFreq": false, "timeZone": "UTC"}'
         }
         app.ports.loadFromLocalStorage.send(incache);
        </script>
        <script>
             var menuapp = Elm.StandAloneMenu.init({
              node: document.getElementById('menu-elm'),
                flags: {{flags_menu | safe}}
          });
        </script>
        {% include "menu_stand_alone.html" %}
    </body>
</html>

